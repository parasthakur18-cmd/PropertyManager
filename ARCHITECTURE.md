# Hostezee PMS - System Architecture

## Overview Diagram

```
┌────────────────────────────────────────────────────────────────────────────────┐
│                              HOSTEZEE PMS                                       │
├────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│   ┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐  │
│   │   LANDING   │────▶│    LOGIN    │────▶│  DASHBOARD  │────▶│   MODULES   │  │
│   │    PAGE     │     │    PAGE     │     │    HOME     │     │             │  │
│   └─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘  │
│         │                   │                   │                   │          │
│         ▼                   ▼                   ▼                   ▼          │
│   ┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐  │
│   │  AI Chatbot │     │   Replit    │     │   Quick     │     │  See Below  │  │
│   │   (OpenAI)  │     │    Auth     │     │   Actions   │     │  for List   │  │
│   └─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘  │
│                                                                                 │
└────────────────────────────────────────────────────────────────────────────────┘
```

---

## Module Connections

### 1. Property Management (Core)
```
┌─────────────────────────────────────────────────────────────────┐
│                        PROPERTIES                                │
│                    (Multi-Property Hub)                          │
├─────────────────────────────────────────────────────────────────┤
│                              │                                   │
│         ┌────────────────────┼────────────────────┐             │
│         ▼                    ▼                    ▼             │
│   ┌──────────┐        ┌──────────┐        ┌──────────┐         │
│   │  ROOMS   │        │  STAFF   │        │ SETTINGS │         │
│   │          │        │          │        │          │         │
│   │ - Types  │        │ - Users  │        │ - Features│        │
│   │ - Beds   │        │ - Roles  │        │ - WhatsApp│        │
│   │ - Rates  │        │ - Perms  │        │ - Templates│       │
│   └──────────┘        └──────────┘        └──────────┘         │
│         │                    │                                   │
│         └────────────────────┼───────────────────────────────── │
│                              ▼                                   │
│                    ┌──────────────────┐                         │
│                    │    BOOKINGS      │                         │
│                    └──────────────────┘                         │
└─────────────────────────────────────────────────────────────────┘
```

### 2. Booking Lifecycle
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           BOOKING FLOW                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐             │
│   │  CREATE  │───▶│ ADVANCE  │───▶│ CONFIRM  │───▶│ CHECK-IN │             │
│   │ BOOKING  │    │ PAYMENT  │    │ BOOKING  │    │          │             │
│   └──────────┘    └──────────┘    └──────────┘    └──────────┘             │
│        │               │               │               │                    │
│        │               ▼               ▼               ▼                    │
│        │         ┌──────────┐    ┌──────────┐    ┌──────────┐              │
│        │         │ RazorPay │    │ WhatsApp │    │   QR     │              │
│        │         │ Payment  │    │  Notify  │    │ Self-    │              │
│        │         │   Link   │    │          │    │ CheckIn  │              │
│        │         └──────────┘    └──────────┘    └──────────┘              │
│        │                                              │                     │
│        │                                              ▼                     │
│        │    ┌────────────────────────────────────────────────────┐         │
│        │    │                  DURING STAY                        │         │
│        │    ├────────────────────────────────────────────────────┤         │
│        │    │  ┌──────────┐  ┌──────────┐  ┌──────────┐         │         │
│        │    │  │  FOOD    │  │  EXTRA   │  │  ROOM    │         │         │
│        │    │  │  ORDERS  │  │ SERVICES │  │ SERVICE  │         │         │
│        │    │  └──────────┘  └──────────┘  └──────────┘         │         │
│        │    └────────────────────────────────────────────────────┘         │
│        │                                              │                     │
│        ▼                                              ▼                     │
│   ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐             │
│   │  GUEST   │    │  BILL    │◀───│ CHECKOUT │◀───│ FINAL    │             │
│   │ DATABASE │    │ GENERATE │    │          │    │ PAYMENT  │             │
│   └──────────┘    └──────────┘    └──────────┘    └──────────┘             │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3. Staff Management (New)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        STAFF MANAGEMENT                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌──────────────┐         ┌──────────────┐         ┌──────────────┐       │
│   │    ADMIN     │────────▶│   INVITE     │────────▶│    EMAIL     │       │
│   │   (You)      │         │   STAFF      │         │   SENT       │       │
│   └──────────────┘         └──────────────┘         └──────────────┘       │
│                                                            │                │
│                                                            ▼                │
│   ┌──────────────┐         ┌──────────────┐         ┌──────────────┐       │
│   │   STAFF      │◀────────│   ACCOUNT    │◀────────│   ACCEPT     │       │
│   │   ACTIVE     │         │   CREATED    │         │   INVITE     │       │
│   └──────────────┘         └──────────────┘         └──────────────┘       │
│         │                                                                   │
│         ▼                                                                   │
│   ┌─────────────────────────────────────────────────────────────────┐      │
│   │                    PERMISSION MATRIX                             │      │
│   ├─────────────────────────────────────────────────────────────────┤      │
│   │  Module          │  None  │  View  │  Edit                      │      │
│   ├──────────────────┼────────┼────────┼────────────────────────────┤      │
│   │  Bookings        │   ○    │   ○    │   ●                        │      │
│   │  Calendar        │   ○    │   ●    │   ○                        │      │
│   │  Rooms           │   ○    │   ●    │   ○                        │      │
│   │  Guests          │   ○    │   ○    │   ●                        │      │
│   │  Food Orders     │   ○    │   ○    │   ●                        │      │
│   │  Menu Management │   ●    │   ○    │   ○                        │      │
│   │  Payments        │   ○    │   ●    │   ○                        │      │
│   │  Reports         │   ●    │   ○    │   ○                        │      │
│   │  Settings        │   ●    │   ○    │   ○                        │      │
│   │  Tasks           │   ○    │   ○    │   ●                        │      │
│   │  Staff           │   ●    │   ○    │   ○                        │      │
│   └─────────────────────────────────────────────────────────────────┘      │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4. Restaurant & Kitchen
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        RESTAURANT SYSTEM                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌──────────────┐                              ┌──────────────┐            │
│   │    MENU      │                              │   KITCHEN    │            │
│   │  MANAGEMENT  │                              │   DISPLAY    │            │
│   └──────────────┘                              └──────────────┘            │
│         │                                              ▲                     │
│         ▼                                              │                     │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                 │
│   │    QR        │───▶│    FOOD      │───▶│   ORDER      │                 │
│   │   ORDERING   │    │    ORDER     │    │   TRACKING   │                 │
│   └──────────────┘    └──────────────┘    └──────────────┘                 │
│                              │                     │                        │
│                              ▼                     ▼                        │
│                       ┌──────────────┐    ┌──────────────┐                 │
│                       │   WHATSAPP   │    │    BILL      │                 │
│                       │    ALERT     │    │   ADDED      │                 │
│                       └──────────────┘    └──────────────┘                 │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5. Financial System
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        FINANCIAL SYSTEM                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────┐       │
│   │                        INCOME                                    │       │
│   ├─────────────────────────────────────────────────────────────────┤       │
│   │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │       │
│   │  │  ROOM    │  │  FOOD    │  │  EXTRA   │  │ ADVANCE  │        │       │
│   │  │ CHARGES  │  │  ORDERS  │  │ SERVICES │  │ PAYMENTS │        │       │
│   │  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │       │
│   │       │             │             │             │               │       │
│   │       └─────────────┴─────────────┴─────────────┘               │       │
│   │                           │                                      │       │
│   │                           ▼                                      │       │
│   │                    ┌──────────────┐                             │       │
│   │                    │    BILLS     │                             │       │
│   │                    └──────────────┘                             │       │
│   └─────────────────────────────────────────────────────────────────┘       │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────┐       │
│   │                       EXPENSES                                   │       │
│   ├─────────────────────────────────────────────────────────────────┤       │
│   │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │       │
│   │  │ PROPERTY │  │  VENDOR  │  │  STAFF   │  │  OTHER   │        │       │
│   │  │  LEASE   │  │ PAYMENTS │  │ SALARIES │  │ EXPENSES │        │       │
│   │  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │       │
│   └─────────────────────────────────────────────────────────────────┘       │
│                                                                              │
│                              │                                               │
│                              ▼                                               │
│                    ┌──────────────────────┐                                 │
│                    │    P&L REPORTS       │                                 │
│                    │    EXCEL EXPORT      │                                 │
│                    └──────────────────────┘                                 │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6. Notification System
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        NOTIFICATION SYSTEM                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌────────────────────────────────────────────────────────────────┐        │
│   │                     EVENT TRIGGERS                              │        │
│   ├────────────────────────────────────────────────────────────────┤        │
│   │  • New Booking         • Payment Received    • Task Due        │        │
│   │  • Check-in/out        • Food Order          • Staff Invite    │        │
│   │  • Payment Pending     • Expense Added       • Issue Report    │        │
│   └────────────────────────────────────────────────────────────────┘        │
│                              │                                               │
│         ┌────────────────────┼────────────────────┐                         │
│         ▼                    ▼                    ▼                         │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                 │
│   │   WHATSAPP   │    │    EMAIL     │    │   IN-APP     │                 │
│   │  (Authkey)   │    │ (AgentMail)  │    │  REAL-TIME   │                 │
│   └──────────────┘    └──────────────┘    └──────────────┘                 │
│         │                    │                    │                         │
│         ▼                    ▼                    ▼                         │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                 │
│   │   Guests     │    │   Guests     │    │    Staff     │                 │
│   │   Staff      │    │   Staff      │    │    Admins    │                 │
│   └──────────────┘    └──────────────┘    └──────────────┘                 │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 7. External Integrations
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                       EXTERNAL INTEGRATIONS                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│                        ┌──────────────────┐                                 │
│                        │   HOSTEZEE PMS   │                                 │
│                        └──────────────────┘                                 │
│                               │                                              │
│     ┌─────────────┬───────────┼───────────┬─────────────┐                   │
│     ▼             ▼           ▼           ▼             ▼                   │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐                │
│ │RAZORPAY │ │AUTHKEY  │ │AGENTMAIL│ │ BEDS24  │ │ OPENAI  │                │
│ │         │ │         │ │         │ │         │ │         │                │
│ │Payments │ │WhatsApp │ │ Email   │ │OTA Sync │ │Chatbot  │                │
│ │Links    │ │SMS/OTP  │ │ Sending │ │Booking  │ │AI Help  │                │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘                │
│     │             │           │           │             │                   │
│     ▼             ▼           ▼           ▼             ▼                   │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐                │
│ │• Pay    │ │• OTP    │ │• Booking│ │• Airbnb │ │• Landing│                │
│ │  Links  │ │• Alerts │ │  Confirm│ │• Booking│ │  Page   │                │
│ │• Subs   │ │• Remind │ │• Invite │ │  .com   │ │• In-App │                │
│ │• Refund │ │• Orders │ │• Reports│ │• Agoda  │ │  Help   │                │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘                │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 8. User Roles & Access
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         USER HIERARCHY                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│                        ┌──────────────────┐                                 │
│                        │   SUPER ADMIN    │                                 │
│                        │   (System Owner) │                                 │
│                        └──────────────────┘                                 │
│                               │                                              │
│         ┌─────────────────────┼─────────────────────┐                       │
│         ▼                     ▼                     ▼                       │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                 │
│   │ All Users    │    │ All Props    │    │ Subscriptions│                 │
│   │ Management   │    │ Management   │    │ & Analytics  │                 │
│   └──────────────┘    └──────────────┘    └──────────────┘                 │
│                                                                              │
│                        ┌──────────────────┐                                 │
│                        │      ADMIN       │                                 │
│                        │ (Property Owner) │                                 │
│                        └──────────────────┘                                 │
│                               │                                              │
│         ┌─────────────────────┼─────────────────────┐                       │
│         ▼                     ▼                     ▼                       │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                 │
│   │ Own Props    │    │ Invite Staff │    │ All Features │                 │
│   │ Only         │    │ & Permissions│    │ (Own Props)  │                 │
│   └──────────────┘    └──────────────┘    └──────────────┘                 │
│                                                                              │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                 │
│   │   MANAGER    │    │    STAFF     │    │   KITCHEN    │                 │
│   │              │    │              │    │              │                 │
│   │ Most Access  │    │ Limited      │    │ Food Orders  │                 │
│   │ Assigned Prop│    │ Per Perms    │    │ Menu Only    │                 │
│   └──────────────┘    └──────────────┘    └──────────────┘                 │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Database Schema Overview

```
┌────────────────────────────────────────────────────────────────────────────┐
│                          DATABASE TABLES                                    │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   CORE TABLES              BOOKING TABLES           FINANCE TABLES         │
│   ───────────              ──────────────           ──────────────         │
│   • properties             • bookings               • bills                │
│   • rooms                  • guests                 • payments             │
│   • users                  • extra_services         • expenses             │
│   • user_permissions       • booking_extras         • vendors              │
│   • staff_invitations                               • expense_categories   │
│                                                                             │
│   RESTAURANT TABLES        NOTIFICATION TABLES      SETTINGS TABLES        │
│   ─────────────────        ───────────────────      ───────────────        │
│   • menu_categories        • notifications          • feature_settings     │
│   • menu_items             • activity_logs          • whatsapp_templates   │
│   • food_orders            • error_reports          • ota_credentials      │
│   • order_items                                                            │
│                                                                             │
│   STAFF TABLES             SUBSCRIPTION TABLES                              │
│   ────────────             ───────────────────                              │
│   • attendance             • subscription_plans                             │
│   • tasks                  • user_subscriptions                             │
│   • task_assignments       • subscription_invoices                          │
│                                                                             │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## API Endpoints Overview

| Module | Endpoints | Purpose |
|--------|-----------|---------|
| Auth | `/api/auth/*` | Login, logout, session |
| Properties | `/api/properties/*` | CRUD properties |
| Rooms | `/api/rooms/*` | CRUD rooms |
| Bookings | `/api/bookings/*` | CRUD bookings, calendar |
| Guests | `/api/guests/*` | Guest management |
| Users | `/api/users/*` | User management |
| Staff Invites | `/api/staff-invitations/*` | Invite, accept, cancel |
| Permissions | `/api/user-permissions/*` | Set permissions |
| Food Orders | `/api/orders/*` | Restaurant orders |
| Menu | `/api/menu-*` | Menu management |
| Bills | `/api/bills/*` | Billing |
| Payments | `/api/payments/*` | Payment processing |
| Expenses | `/api/expenses/*` | Expense tracking |
| Tasks | `/api/tasks/*` | Task management |
| Notifications | `/api/notifications/*` | In-app alerts |
| Reports | `/api/reports/*` | Analytics |
| Settings | `/api/feature-settings/*` | Configuration |
| Super Admin | `/api/super-admin/*` | System admin |

---

*Document Generated: January 2026*
*Hostezee Property Management System v1.0*
